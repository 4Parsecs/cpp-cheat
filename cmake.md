# CMake

Make alternative that aims to be:

-   more cross platform: works on Linux and Windows

-   more declarative and compilation focused:
    you declare high level properties, Make translates them to the system.

Generates programs that make the project, including projects for IDEs.

For example, it can generated:

- POSIX `Makefiles` on Linux,
- `cmd.exe` build scripts for Windows
- Code::Blocks project

all from the same input file.

The configuration file is `CMakeLists.txt`, and are written in Yet Another Language.

The standard CMake build process is:

    mkdir build
    cd build
    cmake ..
    cmake --build .

All generated output will be put inside `build`, which should be gitignored.

Yes, you want to define:

    alias cmk='mkdir -p build && cd build && cmake .. && cmake --build .'

CMake also comes with a test driver, `ctest`, which you can use as:

    cd build
    ctest .

## Change install destination without recompile

<http://stackoverflow.com/questions/13480846/how-to-modify-the-install-path-without-running-the-configure-script-cmake-again>

Says:

    make install DESTDIR=/opt/local

## Uninstall

Nope, not by default!

<http://stackoverflow.com/questions/19921017/cleaning-cmake-installed-files>

<https://cmake.org/Wiki/CMake_FAQ#Can_I_do_.22make_uninstall.22_with_CMake.3F>

`install_manifest.txt` contains a list of installed files and seems to be generated by default under `build/` upon install, so you can just do:

    sudo xargs rm <install_manifest.txt

## Show build commands

With the generated makefile:

    make VERBOSE=1

## Make shared library

    cmake .. -DBUILD_SHARED_LIBS=ON

<https://cmake.org/cmake/help/v3.0/variable/BUILD_SHARED_LIBS.html>

## IDEs

<https://cmake.org/Wiki/CMake_Generator_Specific_Information>

Eclipse CDT:

- <http://stackoverflow.com/questions/18931278/project-generated-with-cmake-for-eclipse-cdt>
- <http://stackoverflow.com/questions/9453851/how-to-configure-eclipse-cdt-for-cmake>

Code::Blocks:

    cd build
    cmake .. -G 'CodeBlocks - Unix Makefiles'
